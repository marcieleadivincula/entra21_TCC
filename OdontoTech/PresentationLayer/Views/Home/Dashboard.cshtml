@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "Dashboard";
}
<!doctype html>
<html lang="pt-br">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Source+Serif+Pro:400,600&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="~/fonts/icomoon/style.css">

    <link rel="stylesheet" href="~/css/owl.carousel.min.css">

    <!-- Bootstrap CSS -->
    @*<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">*@

    <!-- Style -->
    @*<link rel="stylesheet" type="text/css" href="./css/util.css">
        <link rel="stylesheet" type="text/css" href="./css/main.css">*@

    <link href="~/css/bootstrap.min.css" rel="stylesheet" />

    <link href="~/css/style.css" rel="stylesheet" />

    <link rel="stylesheet" href="~/css/main.css" />
    <link rel="stylesheet" href="~/css/util.css" />

    <title>Home</title>
</head>
<body>
    <main>
        @*<aside class="sidebar">
            <div class="toggle">
                <a href="#" class="burger js-menu-toggle" data-toggle="collapse" data-target="#main-navbar">
                    <span></span>
                </a>
=======
    @{
        AtendimentoProcedimentosBLL atendimentoProcedimentosBLL = new AtendimentoProcedimentosBLL();

        PacienteBLL pacienteBll = new PacienteBLL();
        ColaboradorBLL colaboradorBLL = new ColaboradorBLL();
        AgendaBLL agendaBLL = new AgendaBLL();
        TipoProcedimentoBLL tipoProcedimentoBLL = new TipoProcedimentoBLL();
        AtendimentoBLL atendimentoBLL = new AtendimentoBLL();
        ProcedimentoBLL procedimentoBLL = new ProcedimentoBLL();

        List<Paciente> listaPaciente = pacienteBll.GetAll();
        List<Colaborador> listaColaborador = colaboradorBLL.GetAll();
        List<Agenda> listaAgenda = agendaBLL.GetAll();
        List<TipoProcedimento> tipoProcedimentos = tipoProcedimentoBLL.GetAll();
        List<Atendimento> atendimentos = atendimentoBLL.GetAll();
        List<AtendimentoProcedimentos> atendimentoProcedimentos = atendimentoProcedimentosBLL.GetAll();



        for (int i = 0; i < atendimentoProcedimentos.Count; i++)
        {
            atendimentoProcedimentos[i].Atendimento = atendimentoBLL.GetById(atendimentoProcedimentos[i].Atendimento);
            atendimentoProcedimentos[i].Procedimento = procedimentoBLL.GetById(atendimentoProcedimentos[i].Procedimento);
            atendimentoProcedimentos[i].Procedimento.TipoProcedimento = tipoProcedimentoBLL.GetById(atendimentoProcedimentos[i].Procedimento.TipoProcedimento);
            atendimentoProcedimentos[i].Atendimento.Procedimentos = atendimentoBLL.GetProcedimentos(atendimentoProcedimentos[i].Atendimento.Id);
        }


    }


    <main class="wrapper">
        <section>
            <div class="toolbar">
                <div class="toggle">
                    <div class="toggle__option">semana</div>
                    <div class="toggle__option toggle__option--selected">mês</div>
                </div>
                <div class="current-month">
                    @DateTime.Now.Month / @DateTime.Now.Year
                </div>
                <div class="search-input">
                    @*<input type="text" value="">
                        <i class="fa fa-search"></i>*@

        <div class="container">

            <div class="calendar-base">

                <div class="year">@DateTime.Now.Year</div>
                <!-- year -->

                <div class="triangle-left"></div>
                <!--triangle -->
                <div class="triangle-right"></div>
                <!--  triangle -->

                <div class="months">
                    <span class="month-hover">Jan</span>
                    <span class="month-hover">Feb</span>
                    <span class="month-hover">Mar</span>
                    <strong class="month-color">Apr</strong>
                    <span class="month-hover">May</span>
                    <span class="month-hover">Jun</span>
                    <span class="month-hover">July</span>
                    <span class="month-hover">Aug</span>
                    <span class="month-hover">Sep</span>
                    <span class="month-hover">Oct</span>
                    <span class="month-hover">Nov</span>
                    <span class="month-hover">Dec</span>
                </div><!-- months -->
                <hr class="month-line" />

                <div class="days">SUN MON TUE WED THU FRI SAT</div>
                <!-- days -->

                <div class="num-dates">

                    <div class="first-week"><span class="grey">26 27 28 29 30 31</span> 01</div>
                    <!-- first week -->
                    <div class="second-week">02 03 04 05 06 07 08</div>
                    <!-- week -->
                    <div class="third-week"> 09 10 11 12 13 14 15</div>
                    <!-- week -->
                    <div class="fourth-week"> 16 17 18 19 20 21 22</div>
                    <!-- week -->
                    <div class="fifth-week"> 23 24 25 26 <strong class="white">27</strong> 28 29</div>
                    <!-- week -->
                    <div class="sixth-week"> 30 <span class="grey">01 02 03 04 05 06</span></div>
                    <!-- week -->
                </div>
                <!-- num-dates -->
                <div class="event-indicator"></div>
                <!-- event-indicator -->
                <div class="active-day"></div>
                <!-- active-day -->
                <div class="event-indicator two"></div>
                <!-- event-indicator -->

            </div>
            <!-- calendar-base -->
            <div class="calendar-left">

                <div class="num-date">@DateTime.Now.Day</div>
                <!--num-date -->
                <div class="day">TUESDAY</div>
                <!--day -->
                <div class="current-events">
                    Current Events
                    <br />
                    <ul>
                        <li>Day 09 Daily CSS Image</li>
                    </ul>
                    <span class="posts">See post events</span>
                </div>
                <!--current-events -->

                <div class="create-event">Create an Event</div>
                <!-- create-event -->
                <hr class="event-line" />
                <div class="add-event">
                    <span class="add">
                        <i class="fa fa-plus-circle"></i>
                        <input type="button" name="new-event" value="" />
                    </span>
                </div>
                <!-- add-event -->

            </div>
            <!-- calendar-left -->

            <br />
            <form class="d-flex">
                <button class="btn btn-outline-success button new" href="/Home/Atendimento" id="new-transaction">+ Agendar atendimento</button>
          
                @*<a href="#" class="button new" id="new-transaction">+ Nova Transação</a>*@
            </form>

            <h2>Atendimentos de hoje:</h2>
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Horário entrada</th>
                        <th scope="col">Horário saída</th>
                        <th scope="col">Paciente</th>
                        <th scope="col">Dentista</th>
                        <th scope="col">Quantidade</th>
                        <th scope="col">Procedimento</th>
                        <th scope="col">Status</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in atendimentoProcedimentos)
                    {
                        <tr>
                            <th scope="row">@item.Id</th>
                            <td>@item.Atendimento.DtInicioAtendimento.TimeOfDay</td>
                            <td> @item.Atendimento.DtFinalAtendimento.TimeOfDay</td>

                            @{ item.Atendimento.Paciente = pacienteBll.GetById(item.Atendimento.Paciente);}
                            <td>
                                @item.Atendimento.Paciente.Nome
                            </td>

                            @{ item.Atendimento.Colaborador = colaboradorBLL.GetById(item.Atendimento.Colaborador.Id);}
                            <td>
                                @item.Atendimento.Colaborador.Nome
                            </td>

                            <td>@item.QtdProcedimento </td>
                            <td>
                                @{item.Procedimento.TipoProcedimento = tipoProcedimentoBLL.GetById(item.Procedimento.TipoProcedimento); }

                                @item.Procedimento.TipoProcedimento.Nome

                            </td>


                            <td>@item.Atendimento.StatusAtendimento</td>
                        </tr>
                    }
                </tbody>
            </table>
        </section>
    </main>

    <aside class="sidebar">
        <div class="logo">OdontoTech</div>
        <div class="avatar">
            <div class="avatar__img">
                <img src="~/images/icons/OdontoTechV2.png" alt="avatar" height="70" width="70" data-atf="1" />
            </div>
            <div class="avatar__name">
                John Smith
            </div>

            <div class="avatar__name">
                <a href="#" class="button new" id="new-transaction">+ Agendar atendimento</a>
            </div>

        </div>
        <nav class="menu">
            <ul>
                <li class="nav-item">
                    <a class="menu__item menu__item--active" href="/Home/Dashboard">
                        <i class="menu__icon fa fa-home"></i>
                        <span class="menu__text">Início</span>
                    </a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle menu__item" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" href="#">
                        <i class="menu__icon fa fa-envelope"></i>
                        <span class="menu__text">Serviços</span>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="/Home/Atendimento">Atendimentos</a></li>
                        <li><a class="dropdown-item" href="/Home/Procedimento">Procedimentos</a></li>
                        <li><a class="dropdown-item" href="/Home/TipoProcedimento">Tipo de Procedimento</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle menu__item" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" href="#">
                        <i class="menu__icon fas fa-hand-holding-usd"></i>
                        <i class="fas fa-dollar-sign"></i>
                        <span class="menu__text">Financeiro</span>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="/Home/Pagamento">Pagamento</a></li>
                        <li><a class="dropdown-item" href="/Home/TipoPagamento">Tipo de Pagamento</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle menu__item" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" href="#">
                        <i class="menu__icon fa fa-tasks"></i>
                        <span class="menu__text">Gestão</span>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="/Home/Clinica">Clínicas</a></li>
                        <li><a class="dropdown-item" href="/Home/Funcao">Funções</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle menu__item" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" href="#">
                        <i class="menu__icon fa fa-map-marker"></i>
                        <span class="menu__text">Localização</span>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="/Home/Endereco">Endereços</a></li>
                        <li><a class="dropdown-item" href="/Home/Logradouro">Logradouros</a></li>
                        <li><a class="dropdown-item" href="/Home/Bairro">Bairros</a></li>
                        <li><a class="dropdown-item" href="/Home/Cidade">Cidades</a></li>
                        <li><a class="dropdown-item" href="/Home/Estado">Estados</a></li>
                        <li><a class="dropdown-item" href="/Home/Pais">Países</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle menu__item" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" href="#">
                        <i class="menu__icon fas fa-boxes"></i>
                        <span class="menu__text">Materias</span>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="/Home/Estoque">Estoque</a></li>
                        <li><a class="dropdown-item" href="/Home/Produto">Produtos</a></li>
                        <li><a class="dropdown-item" href="/Home/TipoEmbalagem">Tipo de Embalagem</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle menu__item" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" href="#">
                        <i class="menu__icon fas fa-users"></i>
                        <span class="menu__text">Usuários</span>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="/Home/Colaborador">Colaboradores</a></li>
                        <li><a class="dropdown-item" href="/Home/Paciente">Pacientes</a></li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a class="menu__item" href="/Home/Index">
                        <i class="menu__icon fas fa-sign-out-alt"></i>
                        <span class="menu__text">Sair</span>
                    </a>
                </li>
            </ul>
        </nav>

        <div class="copyright">copyright &copy; @DateTime.Now.Year</div>
    </aside>

    <div class="modal-overlay">
        <div class="modal">
            <div class="form">
                <h2>Novo Atendimento</h2>
                <form action="" onsubmit="Form.submit(event)">
                    <div class="input-group">
                        <label class="sr-only" for="description">Tipo de procedimento</label>
                        <input type="text" id="description" name="description" placeholder="Tipo de procedimento" />
                    </div>

                    <div class="input-group">
                        <label class="sr-only" for="amount">Valor</label>
                        <input type="number" step="0.01" id="amount" name="amount" placeholder="0,00" />
                        <small class="help">
                            Use o sinal - (negativo) para despesas e , (vírgula) para casas
                            decimais
                        </small>
                    </div>

                    <div class="input-group">
                        <label class="sr-only" for="date">Data</label>
                        <input type="date" id="date" name="date" />
                    </div>

                    <div class="input-group">
                        <label class="sr-only" for="time">Horário</label>
                        <input type="time" id="date" name="time" />
                    </div>

                    <div class="input-group">
                        <label class="sr-only" for="time">Dentista</label>
                        <input type="text" id="dentist" name="dentist" placeholder="Dr(a)" />
                    </div>

                    <div class="input-group actions">
                        <a href="#" class="button cancel" id="cancel-trans">Cancelar</a>
                        <button>Salvar</button>
                    </div>
                </form>
            </div>
        </div>
        <!-- container -->
    </main>

    <script src="https://use.fontawesome.com/d09559d1bd.js"></script>

    <script src="~/js/main.js"></script>
    @*<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>*@

    <script src="~/js/jquery-3.3.1.min.js"></script>
    <script src="~/js/popper.min.js"></script>
    <script src="~/js/bootstrap.min.js"></script>
    <script src="~/js/main.js"></script>
    <script src="~/js/dashboard.js"></script>
</body>
</html>